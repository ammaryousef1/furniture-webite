(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8775],{35614:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create_bot",function(){return n(49009)}])},39303:function(e,a,n){"use strict";var l,t,i,r,o,s,u,d,m,g,c,p,b,_,y,k,B;n.r(a);let f={fragment:{argumentDefinitions:[l={defaultValue:null,kind:"LocalArgument",name:"apiKey"},t={defaultValue:null,kind:"LocalArgument",name:"apiUrl"},i={defaultValue:null,kind:"LocalArgument",name:"description"},r={defaultValue:null,kind:"LocalArgument",name:"handle"},o={defaultValue:null,kind:"LocalArgument",name:"hasLinkification"},s={defaultValue:null,kind:"LocalArgument",name:"hasMarkdownRendering"},u={defaultValue:null,kind:"LocalArgument",name:"hasSuggestedReplies"},d={defaultValue:null,kind:"LocalArgument",name:"introduction"},m={defaultValue:null,kind:"LocalArgument",name:"isApiBot"},g={defaultValue:null,kind:"LocalArgument",name:"isPrivateBot"},c={defaultValue:null,kind:"LocalArgument",name:"isPromptPublic"},p={defaultValue:null,kind:"LocalArgument",name:"model"},b={defaultValue:null,kind:"LocalArgument",name:"profilePictureUrl"},_={defaultValue:null,kind:"LocalArgument",name:"prompt"}],kind:"Fragment",metadata:null,name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:y=[{kind:"Variable",name:"apiKey",variableName:"apiKey"},{kind:"Variable",name:"apiUrl",variableName:"apiUrl"},{kind:"Variable",name:"description",variableName:"description"},{kind:"Variable",name:"handle",variableName:"handle"},{kind:"Variable",name:"hasLinkification",variableName:"hasLinkification"},{kind:"Variable",name:"hasMarkdownRendering",variableName:"hasMarkdownRendering"},{kind:"Variable",name:"hasSuggestedReplies",variableName:"hasSuggestedReplies"},{kind:"Variable",name:"introduction",variableName:"introduction"},{kind:"Variable",name:"isApiBot",variableName:"isApiBot"},{kind:"Variable",name:"isPrivateBot",variableName:"isPrivateBot"},{kind:"Variable",name:"isPromptPublic",variableName:"isPromptPublic"},{kind:"Variable",name:"model",variableName:"model"},{kind:"Variable",name:"profilePicture",variableName:"profilePictureUrl"},{kind:"Variable",name:"promptPlaintext",variableName:"prompt"}],concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[k={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"BotHeader_bot"}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[p,r,_,c,d,i,b,t,l,m,o,s,u,g],kind:"Operation",name:"CreateBotMain_poeBotCreate_Mutation",selections:[{alias:null,args:y,concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[k,{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[B,{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"UrlBotImage",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerIsCreator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSystemBot",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}]},params:{cacheID:"112760d95ef56695f9a99e5bc69dbf60",id:null,metadata:{},name:"CreateBotMain_poeBotCreate_Mutation",operationKind:"mutation",text:"mutation CreateBotMain_poeBotCreate_Mutation(\n  $model: String!\n  $handle: String!\n  $prompt: String!\n  $isPromptPublic: Boolean!\n  $introduction: String!\n  $description: String!\n  $profilePictureUrl: String\n  $apiUrl: String\n  $apiKey: String\n  $isApiBot: Boolean\n  $hasLinkification: Boolean\n  $hasMarkdownRendering: Boolean\n  $hasSuggestedReplies: Boolean\n  $isPrivateBot: Boolean\n) {\n  poeBotCreate(model: $model, handle: $handle, promptPlaintext: $prompt, isPromptPublic: $isPromptPublic, introduction: $introduction, description: $description, profilePicture: $profilePictureUrl, apiUrl: $apiUrl, apiKey: $apiKey, isApiBot: $isApiBot, hasLinkification: $hasLinkification, hasMarkdownRendering: $hasMarkdownRendering, hasSuggestedReplies: $hasSuggestedReplies, isPrivateBot: $isPrivateBot) {\n    status\n    bot {\n      id\n      ...BotHeader_bot\n    }\n  }\n}\n\nfragment BotHeader_bot on Bot {\n  displayName\n  isLimitedAccess\n  ...BotImage_bot\n  ...BotLink_bot\n  ...IdAnnotation_node\n  ...botHelpers_useViewerCanAccessPrivateBot\n  ...botHelpers_useDeletion_bot\n}\n\nfragment BotImage_bot on Bot {\n  displayName\n  ...botHelpers_useDeletion_bot\n  ...BotImage_useProfileImage_bot\n}\n\nfragment BotImage_useProfileImage_bot on Bot {\n  image {\n    __typename\n    ... on LocalBotImage {\n      localName\n    }\n    ... on UrlBotImage {\n      url\n    }\n  }\n  ...botHelpers_useDeletion_bot\n}\n\nfragment BotLink_bot on Bot {\n  displayName\n}\n\nfragment IdAnnotation_node on Node {\n  __isNode: __typename\n  id\n}\n\nfragment botHelpers_useDeletion_bot on Bot {\n  deletionState\n}\n\nfragment botHelpers_useViewerCanAccessPrivateBot on Bot {\n  isPrivateBot\n  viewerIsCreator\n  isSystemBot\n}\n"}};f.hash="179c313af657bf96f6b274123f710c38",a.default=f},71049:function(e,a,n){"use strict";n.r(a);let l={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"CreateBotMain_queryRoot",selections:[{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BotInfoForm_viewer"},{alias:"enableApiBots",args:[{kind:"Literal",name:"gateName",value:"enable_api_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"enable_api_bots")'}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"messageId",variableName:"messageId"}],concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],type:"QueryRoot",abstractKey:null};l.hash="8723bb5d46f3bca97c30287d3cdee2eb",a.default=l},64099:function(e,a,n){"use strict";var l,t,i,r,o;n.r(a);let s={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",metadata:null,name:"createBotPageQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t={alias:"allowUserCreatedBots",args:[{kind:"Literal",name:"gateName",value:"enable_user_created_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"enable_user_created_bots")'},{args:null,kind:"FragmentSpread",name:"PageWithChatSidebarLayout_viewer"}],storageKey:null},{args:i=[{kind:"Variable",name:"messageId",variableName:"messageId"}],kind:"FragmentSpread",name:"CreateBotMain_queryRoot"}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"createBotPageQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:null,args:[{kind:"Literal",name:"includeNewModel",value:!0}],concreteType:"Bot",kind:"LinkedField",name:"availableBots",plural:!0,selections:[r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"botId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletionState",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"localName",storageKey:null}],type:"LocalBotImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"UrlBotImage",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerIsCreator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSystemBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowsUserCreation",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:"availableBots(includeNewModel:true)"},{alias:null,args:null,concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[o,r],storageKey:null},{alias:"enableExploreBotsPage",args:[{kind:"Literal",name:"gateName",value:"enable_explore_bots_page"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"enable_explore_bots_page")'},{alias:"enableUserProfilePage",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_user_profile_page"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_user_profile_page")'},{alias:null,args:null,kind:"ScalarField",name:"hasCompletedMultiplayerNux",storageKey:null},{alias:"enableNux",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_nux"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_nux")'},r,{alias:"enableApiBots",args:[{kind:"Literal",name:"gateName",value:"enable_api_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"enable_api_bots")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"randomizedAvailableBotHandle",storageKey:null},{alias:null,args:i,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},r],storageKey:null}]},params:{cacheID:"f79aeaa92781df68b9e818c1cfdaa53e",id:null,metadata:{},name:"createBotPageQuery",operationKind:"query",text:'query createBotPageQuery(\n  $messageId: BigInt\n) {\n  viewer {\n    allowUserCreatedBots: booleanGate(gateName: "enable_user_created_bots")\n    ...PageWithChatSidebarLayout_viewer\n    id\n  }\n  ...CreateBotMain_queryRoot_31kHET\n}\n\nfragment BotHeader_bot on Bot {\n  displayName\n  isLimitedAccess\n  ...BotImage_bot\n  ...BotLink_bot\n  ...IdAnnotation_node\n  ...botHelpers_useViewerCanAccessPrivateBot\n  ...botHelpers_useDeletion_bot\n}\n\nfragment BotImage_bot on Bot {\n  displayName\n  ...botHelpers_useDeletion_bot\n  ...BotImage_useProfileImage_bot\n}\n\nfragment BotImage_useProfileImage_bot on Bot {\n  image {\n    __typename\n    ... on LocalBotImage {\n      localName\n    }\n    ... on UrlBotImage {\n      url\n    }\n  }\n  ...botHelpers_useDeletion_bot\n}\n\nfragment BotInfoForm_viewer on Viewer {\n  availableBots(includeNewModel: true) {\n    displayName\n    model\n    allowsUserCreation\n    id\n  }\n}\n\nfragment BotLink_bot on Bot {\n  displayName\n}\n\nfragment ChatPageBotSwitcher_BotNavItem_bot on Bot {\n  botId\n  handle\n  id\n  ...BotHeader_bot\n}\n\nfragment ChatPageBotSwitcher_viewer on Viewer {\n  availableBots(includeNewModel: true) {\n    id\n    ...ChatPageBotSwitcher_BotNavItem_bot\n  }\n}\n\nfragment ChatPageManageBotsGroup_viewer on Viewer {\n  allowUserCreatedBots: booleanGate(gateName: "enable_user_created_bots")\n  enableExploreBotsPage: booleanGate(gateName: "enable_explore_bots_page")\n}\n\nfragment ChatPageMultiplayerLinks_viewer on Viewer {\n  poeUser {\n    handle\n    id\n  }\n}\n\nfragment ChatPageSidebar_viewer on Viewer {\n  uid\n  ...ChatPageBotSwitcher_viewer\n  ...ChatPageMultiplayerLinks_viewer\n  ...ChatPageManageBotsGroup_viewer\n  enableUserProfilePage: booleanGate(gateName: "poe_web_enable_user_profile_page")\n}\n\nfragment CreateBotMain_queryRoot_31kHET on QueryRoot {\n  randomizedAvailableBotHandle\n  viewer {\n    ...BotInfoForm_viewer\n    enableApiBots: booleanGate(gateName: "enable_api_bots")\n    id\n  }\n  message(messageId: $messageId) {\n    text\n    id\n  }\n}\n\nfragment IdAnnotation_node on Node {\n  __isNode: __typename\n  id\n}\n\nfragment MultiplayerNuxContextWrapper_viewer on Viewer {\n  hasCompletedMultiplayerNux\n  enableNux: booleanGate(gateName: "poe_web_enable_nux")\n}\n\nfragment PageWithChatSidebarLayout_viewer on Viewer {\n  ...ChatPageSidebar_viewer\n  ...PageWithSidebarLayout_viewer\n}\n\nfragment PageWithSidebarLayout_viewer on Viewer {\n  ...MultiplayerNuxContextWrapper_viewer\n}\n\nfragment botHelpers_useDeletion_bot on Bot {\n  deletionState\n}\n\nfragment botHelpers_useViewerCanAccessPrivateBot on Bot {\n  isPrivateBot\n  viewerIsCreator\n  isSystemBot\n}\n'}};s.hash="604970538ac7d109bd3a251d6488a315",a.default=s},49009:function(e,a,n){"use strict";n.r(a),n.d(a,{__N_SSP:function(){return F},default:function(){return K}});var l,t,i=n(85893),r=n(64099),o=n(22578);n(44311);var s=n(41664),u=n.n(s),d=n(11163),m=n(67294),g=n(7192),c=n(22747),p=n(41114),b=n(38231);(l=t||(t={})).success="success",l.handle_already_taken="handle_already_taken",l.other_failure="other_failure";var _=t,y=n(33591),k=n(5577);let B=()=>{let[e,a]=(0,m.useState)(!1),[l]=(0,o.useMutation)(n(39303)),t=(0,g.ZP)(),i=(0,d.useRouter)(),r=(0,m.useCallback)(e=>{let{baseBot:a,name:n,prompt:r,promptIsPublic:o,introduction:s,description:u,profilePictureUrl:d,apiUrl:m,apiKey:p,isApiBot:b,hasLinkification:y,hasMarkdownRendering:k,hasSuggestedReplies:B,botIsPublic:f}=e;return new Promise((e,v)=>{let w=m?new URL(m).toString():null;l({variables:{model:a,handle:n,prompt:r,isPromptPublic:o,introduction:s,description:u,profilePictureUrl:d,apiUrl:w,apiKey:p,isApiBot:b,hasLinkification:y,hasMarkdownRendering:k,hasSuggestedReplies:B,isPrivateBot:void 0!==f&&!f},onCompleted:a=>{let{poeBotCreate:l}=a;l.status===_.success?i.push("/".concat(n)).then(()=>{t({content:"Bot created!",type:g.pC.success}),e()}):l.status===_.handle_already_taken?(t({content:"Bot name already taken",type:g.pC.error}),v()):(t({content:"Unable to create bot",type:g.pC.error}),v())},onError:()=>{t({content:"Unable to create bot",type:g.pC.error}),v()},updater:(e,a)=>{var n;(null===(n=a.poeBotCreate.bot)||void 0===n?void 0:n.id)&&(0,c.Fo)(e,a.poeBotCreate.bot.id)}})})},[l,t,i]);return{isLoading:e,addBot:(0,m.useCallback)(async e=>{let{image:n,...l}=e;try{a(!0);let e=await (0,b.W)(n);await r({...l,profilePictureUrl:e})}finally{a(!1)}},[r])}},f=e=>{let{queryRoot:a,defaultToApiTab:l}=e,{addBot:t,isLoading:r}=B(),{randomizedAvailableBotHandle:s,viewer:d,message:g}=(0,o.useFragment)(n(71049),a),c=(0,m.useMemo)(p._,[]);return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(y.L,{}),(0,i.jsx)(k.Z,{onSubmit:t,viewer:d,prompt:null==g?void 0:g.text,name:s,submitText:"Create bot",allowSwitchingBotType:d.enableApiBots,isApiBot:l&&d.enableApiBots,apiKey:c,botVisibilityNote:"This bot will be added to your profile and publicly visible. ",disclaimer:(0,i.jsxs)(i.Fragment,{children:["Creation and use of bots is subject to the"," ",(0,i.jsx)(u(),{href:"/tos",target:"_blank",children:"Poe Terms of Service"}),"","."]})})]})};var v=n(32005),w=n(71069),S=n(94611),h=n(30635);let P=n(64099),[N]=(0,h.H)(e=>{let{queryRef:a,additionalProps:n}=e,l=(0,o.usePreloadedQuery)(P,a);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Z,{title:"Poe - Create a bot"}),(0,i.jsx)(w.Z,{viewer:l.viewer,bot:null,header:(0,i.jsx)(v.Z,{title:"Create a bot"}),children:(0,i.jsx)(f,{queryRoot:l,defaultToApiTab:n.api})})]})},r.default,e=>{let a=e.query.prompt_message;if(!a||Array.isArray(a))return{messageId:null};let n=parseInt(a);return{messageId:isNaN(n)?null:n}},{acceptableLoginStatus:h.Y.loggedInOnly,additionalProps:e=>e.query.api?{api:!0}:{}});var F=!0,K=N}},function(e){e.O(0,[3061,8367,7536,2775,1069,4591,9774,2888,179],function(){return e(e.s=35614)}),_N_E=e.O()}]);